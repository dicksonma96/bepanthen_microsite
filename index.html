<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bepanthen</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
        integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="header">
        <img src="./assets/header.jpg" alt="">
    </div>
    <div class="bepanthen container col">
        <div class="content col">
            <picture class="banner row">
                <img src="./assets/banner.jpg" alt="Bepanthen Banner">
            </picture>

            <!-- <iframe class="video" src="https://www.youtube.com/embed/j1mF3K8EDqU?si=9w8tBzirYT-jh4Gg">
            </iframe> -->
            <br>
            <picture class="voucher row">
                <img src="./assets/voucher.png" alt="Bepanthen Voucher">
            </picture>


            <!-- <div class="info_banner row">
                <div class="story col">
                    <img src="./assets/story1.jpg" alt="Bepanthen Sensi Wash">
                    <div class="col">
                        <h3>Bepanthen SensiWash</h3>
                        <p>Bepanthen Sensiwash is a gentle yet effective body cleanser for dry, sensitive and
                            eczema-prone
                            skin.</p>
                        <p>Pro-vitamin B5 helps protect the skin by stabilizing the natural skin barrier and supporting
                            the
                            skinâ€™s own regeneration.
                            Enriched with a prebiotic, which supports the skinâ€™s own protective microflora.
                            Suitable for infants, children and adults.
                            Maintains skinâ€™s natural pH.</p>

                        <a href="#" class="cta_btn">READ MORE</a>
                    </div>
                </div>
                <div class="story col">
                    <img src="./assets/story1.jpg" alt="Bepanthen Sensi Wash">
                    <div class="col">
                        <h3>Bepanthen SensiWash</h3>
                        <p>Bepanthen Sensiwash is a gentle yet effective body cleanser for dry, sensitive and
                            eczema-prone
                            skin.</p>
                        <p>Pro-vitamin B5 helps protect the skin by stabilizing the natural skin barrier and supporting
                            the
                            skinâ€™s own regeneration.
                            Enriched with a prebiotic, which supports the skinâ€™s own protective microflora.
                            Suitable for infants, children and adults.
                            Maintains skinâ€™s natural pH.</p>

                        <a href="#" class="cta_btn">READ MORE</a>
                    </div>
                </div>
            </div> -->

            <h2>Mama Try, Skin Smiles</h2>


            <div class="mmcbt_list col">
                <!-- <div class="mmcbt_skeleton skeleton"></div>-->

                <div class="mmcbt col">
                    <div class="product_info row">
                        <img class="product_img"
                            src="https://media.motherhood.com.my/229669-large_default/bepanthen-baby-ointment-mamacubatry-.jpg"
                            alt="">
                        <div class="info col">
                            <h3>[Mamacubatry] Bepanthen Baby Ointment </h3>
                            <div class="reviews row">
                                <strong>0</strong>
                                <div class="row stars">
                                    <img src="./assets/empty_star.png" alt=""><img src="./assets/empty_star.png"
                                        alt=""><img src="./assets/empty_star.png" alt=""><img
                                        src="./assets/empty_star.png" alt=""><img src="./assets/empty_star.png" alt="">
                                </div>
                                <span>0 reviews</span>
                            </div>

                            <a href="https://m.motherhood.com.my/mamacubatry-infopage" target="_blank"
                                class="cta_btn">BE A TESTER NOW</a>
                        </div>
                    </div>
                </div>
            </div>


            <h2 style="margin:20px 0 0">Bepanthen Community</h2>
            <h3 style="color:#234d96">#IbuBepanthen</h3>

            <div class="ig_skeleton row">
                <div class="skeleton"></div>
                <div class="skeleton"></div>
                <div class="skeleton"></div>
                <div class="skeleton"></div>
                <div class="skeleton"></div>
            </div>
            <div class="ig_grid">
                <!-- to populate ig post -->
            </div>
        </div>
    </div>

    <div class="footer">
        <img src="./assets/footer.jpg" alt="">
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"
        integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script>
        // Mamacubatry Reviews
        const mmcbt_list = document.querySelector('.mmcbt_list');
        const mmcbt_skeleton = document.querySelector('.mmcbt_skeleton');


        function Review(info) {
            const product_info = info.review;
            const first_review = info.reviews[0] || null;
            const read_more_link = "https://m.motherhood.com.my/mamacubatry-product-detail/" + info.review.link_rewrite

            function Stars(rating) {
                const star = `<img src="./assets/star.png" alt="">`
                const empty = `<img src="./assets/empty_star.png" alt="">`
                const max = 5;
                rating = Math.floor(rating);

                let html = "";
                for (let i = 0; i < max; i++) {
                    html += i < rating ? star : empty;
                }

                return html;
            }

            return `<div class="mmcbt col">
                    <div class="product_info row">
                        <img class="product_img" src="${product_info.product_image}" alt="">
                        <div class="info col">
                            <h3>${product_info.product_name}</h3>
                            <div class="reviews row">
                                <strong>${product_info.overall_rating}</strong>
                                <div class="row stars">
                                ${Stars(product_info.overall_rating)}
                                </div>
                                <span>${product_info.total_review} reviews</span>
                            </div>
                        ${first_review ? `
                            <div class="mmcbt_review col">
                                <div class="user_row row">
                                    <div class="avatar row">${first_review.customer_name[0]}</div>
                                    <span>${first_review.customer_name}</span>

                                    <div class="row stars">
                                             ${Stars(first_review.grade)}
                                    </div>
                                </div>
                                <strong>${first_review.title}</strong>
                                <p>${first_review.content}</p>

                                <a href="${read_more_link}" target="_blank" class="read_more">Read More</a>
                            </div>
                        ` : ``}
                            <a href="https://m.motherhood.com.my/mamacubatry-infopage" target="_blank" class="cta_btn">BE A TESTER NOW</a>
                        </div>
                    </div>
                </div>`
        }

        async function FetchReviews() {
            const api_path = "https://m.motherhood.com.my/api/webinar/get_mct_campaign_list?type=review&id_product="

            //Replace the bepanthen products id here
            const products = [
                "bepanthen-baby-ointment-mamacubatry-",
                "wonderlab-ageless-black-ginseng-sleeping-mask-mamacubatry-",
                "mega-bio-life-ab-imunix-30s-mamacubatry-",
                "sambucol-original-kids-120ml-mamacubatry-"
            ]
            try {
                let requestAll = products.map(prod => fetch(api_path + prod))

                let res = await Promise.all(requestAll)
                let datas = await Promise.all(res.map(r => r.json()));

                mmcbt_list.innerHTML = datas.map((data) => {
                    return Review(data.data)
                }).join('')

            }
            catch (e) {
                console.log(e)
            } finally {
                mmcbt_skeleton.style.display = "none";
            }
        }

        // FetchReviews();

    </script>

    <script>

        const ig_info = [
            {
                "caption": "From tiny giggles at bath time to sweet dreams after nappy time, every touch is loveðŸ’•",
                "media_url": "https://scontent.cdninstagram.com/v/t51.82787-15/534926023_18521636497019358_115311447907765966_n.jpg?stp=cmp1_dst-jpg_e35_s640x640_tt6&_nc_cat=100&ccb=1-7&_nc_sid=18de74&_nc_ohc=SAAG6Wju16sQ7kNvwGI3RJQ&_nc_oc=Adnmo-osVAjFoI9oROsVy9U4reUJi-yPdDdergX1t63TLgLbekBlu0dBDUcAMeQC435809zWyw9uWoQcnOIXD8wI&_nc_zt=23&_nc_ht=scontent.cdninstagram.com&_nc_gid=2D6TY2JU87ebL0qIySL9AA&oh=00_AfZkd4m3B_2zghdwcXtrn95-FlXzj7AwiYFX9FmMSOBrKw&oe=68C37280",
                "permalink": "https://www.instagram.com/reel/DNjj5qJyI5G/",
                "like_count": 1396,
                "comments_count": 10
            },
            {
                "caption": "From bath time giggles to post-diaper change cuddles, our little routine stays gentle, fuss-free, and backed by science âœ¨",
                "media_url": "https://scontent.cdninstagram.com/v/t51.82787-15/534332880_18520859698031261_3117729978041267938_n.jpg?stp=cmp1_dst-jpg_e35_s640x640_tt6&_nc_cat=108&ccb=1-7&_nc_sid=18de74&_nc_ohc=qHgwZbaQ4XUQ7kNvwFGkzfc&_nc_oc=AdmHNfTUF7bEvjgJCtcSV7dT_PXXp7yHnLQ_UHEpitrQGs9uIYjyCF04HPgWYty6A0lhQehms836Y8oST53PFHWD&_nc_zt=23&_nc_ht=scontent.cdninstagram.com&_nc_gid=RZRA7A_scxumiqDmq6ahuA&oh=00_AfbZumlVp1gOHJ7dT5CTqPeq58kwoWYtHHJtSoorxjlLcg&oe=68C3792D",
                "permalink": "https://www.instagram.com/p/DNfU34FPZkd/",
                "like_count": 576,
                "comments_count": 5
            },
            {
                "caption": "Every cuddle after bath time, every gentle nappy change, every day out in the sun, caring for your little oneâ€™s sensitive skin is also an act of love. ðŸ’™",
                "media_url": "https://scontent.cdninstagram.com/v/t51.71878-15/539219504_779214064689905_9170539167293506957_n.jpg?stp=cmp1_dst-jpg_e35_s640x640_tt6&_nc_cat=108&ccb=1-7&_nc_sid=18de74&_nc_ohc=wgiomPqIYdoQ7kNvwHfiwl2&_nc_oc=AdlU0iAi1AxjbxGg_dIlMwStlaao424S7qrznWKnBE4AyWUeibE2H26Sg8FpdjhiradHpL_gTnsFP4Ve9sYRXs66&_nc_zt=23&_nc_ht=scontent.cdninstagram.com&_nc_gid=RMPe_i1io-zUjhDDP3oxlA&oh=00_AfZboqVW-3swAPQnJbwkLWGZXNYnd6sMFz2sYiaRNbR2zg&oe=68C377B2",
                "permalink": "https://www.instagram.com/p/DNxUFk_ZCzD/",
                "like_count": 1084,
                "comments_count": 1
            }
        ]


        const ig_grid = document.querySelector('.ig_grid');
        const ig_skeleton = document.querySelector('.ig_skeleton');

        function Post(info) {

            const media = info.media_type == "VIDEO" ?
                `<video class="media" src="${info.media_url}"> </video>`
                :
                ` <img class="media"
                        src="${info.media_url}"
                        alt="">`;

            return `<div class="ig_post col">
                    <a href="${info.permalink}" target="_blank" class="ig_btn row">
                        <img src="./assets/instagram.png" alt="">
                    </a>
                    ${media}
                    <em class="hashtag">
                       ${info.caption}
                    </em>
                    <strong>${info.like_count} likes</strong>
                    <span>${info.comments_count} comments</span>
                </div>
                `
        }

        const FetchIGPosts = async () => {
            const ACCESS_TOKEN = 'EAAKgSuH0kAsBPBrYG8L3ZA8rUWFBcJ547okMuqqlLPuUIkH9uicUkQJUWprCso8DdSBPs5NtR5jaLEDnjtMVZAaT9dBp6iJGKFm9bUlRQaVzDyVSbXUuLZAZCZBTafvnnen1V09ZAS7aboseumdmLO2SZB4zbNZAIJ4uvDZCSZCTAC1NZBQOUv9pIk3hDvMSbOCZCH3gdD2S7cX2LV8MpwZDZD';
            const IG_BUSINESS_ACC_ID = "17841400023455301";
            // const HASHTAG = 'IbuBepanthen'; 
            const HASHTAG = 'IbuBepanthen'; // without '#'


            try {

                // 1) Get Hashtag ID
                // let getHashtagId = await fetch(`https://graph.facebook.com/v23.0/ig_hashtag_search?user_id=${IG_BUSINESS_ACC_ID}&q=${HASHTAG}&access_token=${ACCESS_TOKEN}`).then(r => r.json());
                // let HASHTAG_ID = getHashtagId.data[0].id;

                // let response = await fetch(`https://graph.facebook.com/v23.0/${HASHTAG_ID}/top_media?user_id=${IG_BUSINESS_ACC_ID}&fields=id,caption,media_type,media_url,permalink,timestamp,like_count,comments_count&limit=30&access_token=${ACCESS_TOKEN}`);
                // let data = await response.json();

                // if (response.ok) {
                //     ig_grid.innerHTML = data.data.map((info) => {
                //         return Post(info)
                //     }).join('')
                // }

                ig_grid.innerHTML = ig_info.map((info) => {
                    return Post(info)
                }).join('')

            }
            catch (e) {
                console.log(e)
            } finally {
                ig_skeleton.style.display = "none";
            }

        };


        FetchIGPosts();
    </script>


    <script>

        async function TEST() {
            let res = await fetch("https://www.instagram.com/p/DNxUFk_ZCzD/").then(response => {
                return response.text()
            })
                .then(html => {
                    // Initialize the DOM parser
                    const parser = new DOMParser()
                    // Parse the text
                    const doc = parser.parseFromString(html, "text/html")

                    // You can now even select part of that html as you would in the regular DOM
                    // Example:
                    // const docArticle = doc.querySelector('article').innerHTML

                    console.log(doc)
                })

        }

        TEST();

    </script>
</body>

</html>